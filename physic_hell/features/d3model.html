<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D MODELS</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="feature.css">
</head>

<body>
    <div id="head_container">
        <div id="heading">
            <img src="../imgs/Ph.png" alt="logo" id="logo">
            <h1 id="title">Physic Hell</h1>
        </div>
        <button id="menu_btn">‚ò∞</button>
        <div id="menu">
            <a href="#">home</a>
            <a href="#">Dashboard</a>
            <a href="#">profile</a>
            <a href="#">settings</a>
            <a href="#" id="logout">logout ‚Üí</a>

        </div>
    </div>

    <div id="f_container">
        <div class="content">
            <div id="head">
                <button id="back_btn">‚Üê</button>
                <h2>3D MODELS</h2>
            </div>
            <div id="model_area">
                <div id="vector_inputs" style="margin:10px 0;">
                    <p>Vector A (x,y,z)</p>
                    <input type="number" id="ax" placeholder="Ax" value="3">
                    <input type="number" id="ay" placeholder="Ay" value="2">
                    <input type="number" id="az" placeholder="Az" value="1">

                    <p>Vector B (x,y,z)</p>
                    <input type="number" id="bx" placeholder="Bx" value="1">
                    <input type="number" id="by" placeholder="By" value="2">
                    <input type="number" id="bz" placeholder="Bz" value="3">

                    <button id="update_vector">Update</button>
                </div>

                something is comming soon
            </div>
            <div id="d_options">
                <select name="model_options" id="model_select">
                    <option value="option1">Atomic and molecular structure</option>
                    <option value="option2">Nuclear structure</option>
                    <option value="option3">Electromagnetic spectrum</option>
                    <option value="option4">Cube</option>
                </select>
            </div>
            <button id="model_button">Load Model</button>
        </div>
    </div>


    <script src="../script.js"></script>
    <!-- Three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>

        // ==========================================================
        // 1. BASIC ENGINE SETUP
        // ==========================================================

        const modelArea = document.getElementById("model_area");
        const modelSelect = document.getElementById("model_select");

        // const width = modelArea.clientWidth || 500;
        const width = 260;
        const height = 400;

        // Scene
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111111);

        // Camera
        const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
        camera.position.set(6, 6, 6);

        // Renderer
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(width, height);
        modelArea.innerHTML = "";
        modelArea.appendChild(renderer.domElement);

        // Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;

        // Lights
        const light = new THREE.PointLight(0xffffff, 1.5);
        light.position.set(10, 10, 10);
        scene.add(light);

        const ambientLight = new THREE.AmbientLight(0x404040);
        scene.add(ambientLight);

        // Optional Grid
        const gridHelper = new THREE.GridHelper(20, 20);
        scene.add(gridHelper);


        // ==========================================================
        // 2. GLOBAL ANIMATION SYSTEM
        // ==========================================================

        let activeAnimation = null;

        function animate() {
            requestAnimationFrame(animate);

            if (activeAnimation) activeAnimation();

            controls.update();
            renderer.render(scene, camera);
        }

        animate();


        // ==========================================================
        // 3. CLEAR SCENE FUNCTION
        // ==========================================================

        function clearScene() {

            const toKeep = [light, ambientLight, gridHelper];

            scene.children = scene.children.filter(obj => toKeep.includes(obj));

            activeAnimation = null;
        }


        // ==========================================================
        // 4. MODEL 1 ‚Äî 3D COORDINATE SYSTEM
        // ==========================================================

        function buildCoordinateSystem() {

            clearScene();

            const axesHelper = new THREE.AxesHelper(5);
            scene.add(axesHelper);
        }


        // ==========================================================
        // 5. MODEL 2 ‚Äî VECTOR ADDITION
        // ==========================================================

        function buildVectorAddition() {

            clearScene();

            // Create UI dynamically
            const existingUI = document.getElementById("vector_ui");
            if (existingUI) existingUI.remove();

            const ui = document.createElement("div");
            ui.id = "vector_ui";
            ui.style.margin = "10px 0";
            ui.innerHTML = `
        <p>Vector A (x,y,z)</p>
        <input type="number" id="ax" value="3">
        <input type="number" id="ay" value="2">
        <input type="number" id="az" value="1">

        <p>Vector B (x,y,z)</p>
        <input type="number" id="bx" value="1">
        <input type="number" id="by" value="2">
        <input type="number" id="bz" value="3">

        <button id="update_vector">Update</button>
    `;

            modelArea.parentElement.insertBefore(ui, modelArea);

            function drawVectors() {

                clearScene();

                const ax = parseFloat(document.getElementById("ax").value);
                const ay = parseFloat(document.getElementById("ay").value);
                const az = parseFloat(document.getElementById("az").value);

                const bx = parseFloat(document.getElementById("bx").value);
                const by = parseFloat(document.getElementById("by").value);
                const bz = parseFloat(document.getElementById("bz").value);

                const origin = new THREE.Vector3(0, 0, 0);

                const v1 = new THREE.Vector3(ax, ay, az);
                const v2 = new THREE.Vector3(bx, by, bz);
                const result = new THREE.Vector3().addVectors(v1, v2);

                const arrow1 = new THREE.ArrowHelper(
                    v1.clone().normalize(),
                    origin,
                    v1.length(),
                    0xff0000
                );

                const arrow2 = new THREE.ArrowHelper(
                    v2.clone().normalize(),
                    v1,
                    v2.length(),
                    0x0000ff
                );

                const arrowResult = new THREE.ArrowHelper(
                    result.clone().normalize(),
                    origin,
                    result.length(),
                    0x00ff00
                );

                scene.add(arrow1);
                scene.add(arrow2);
                scene.add(arrowResult);
            }

            document.getElementById("update_vector")
                .addEventListener("click", drawVectors);

            drawVectors();
        }



        // ==========================================================
        // 6. MODEL 3 ‚Äî PROJECTILE MOTION
        // ==========================================================

        function buildProjectileMotion() {

            clearScene();

            const g = 9.8;
            const velocity = 20;   // real physics value
            const angle = Math.PI / 4;

            const scale = 0.1;     // üî• visualization scaling factor

            const points = [];

            for (let t = 0; t < 5; t += 0.05) {

                const x = velocity * Math.cos(angle) * t;
                const y = velocity * Math.sin(angle) * t - 0.5 * g * t * t;

                if (y >= 0) {
                    points.push(
                        new THREE.Vector3(
                            x * scale,
                            y * scale,
                            0
                        )
                    );
                }
            }

            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            const material = new THREE.LineBasicMaterial({ color: 0xffff00 });
            const trajectory = new THREE.Line(geometry, material);
            const ui = document.getElementById("vector_ui");
            if (ui) ui.remove();


            scene.add(trajectory);
        }



        // ==========================================================
        // 7. MODEL 4 ‚Äî SIMPLE HARMONIC MOTION
        // ==========================================================

        function buildSHM() {

            clearScene();

            const geometry = new THREE.BoxGeometry(0.6, 0.6, 0.6);
            const material = new THREE.MeshStandardMaterial({ color: 0x00ffff });
            const mass = new THREE.Mesh(geometry, material);

            scene.add(mass);

            let time = 0;
            const amplitude = 3;
            const omega = 2;

            activeAnimation = function () {
                time += 0.05;
                mass.position.x = amplitude * Math.cos(omega * time);
            };
        }


        // ==========================================================
        // 8. MODEL 5 ‚Äî CIRCULAR MOTION
        // ==========================================================

        function buildCircularMotion() {

            clearScene();

            const geometry = new THREE.SphereGeometry(0.4, 16, 16);
            const material = new THREE.MeshStandardMaterial({ color: 0xff00ff });
            const particle = new THREE.Mesh(geometry, material);

            scene.add(particle);

            const radius = 4;
            let angle = 0;

            activeAnimation = function () {
                angle += 0.02;
                particle.position.x = radius * Math.cos(angle);
                particle.position.z = radius * Math.sin(angle);
            };
        }


        // ==========================================================
        // 9. MODEL REGISTRY SYSTEM
        // ==========================================================

        const physicsModels = [
            { id: "coords", name: "3D Coordinate System", build: buildCoordinateSystem },
            { id: "vector", name: "Vector Addition", build: buildVectorAddition },
            { id: "projectile", name: "Projectile Motion", build: buildProjectileMotion },
            { id: "shm", name: "Simple Harmonic Motion", build: buildSHM },
            { id: "circular", name: "Circular Motion", build: buildCircularMotion }
        ];


        // Populate dropdown dynamically
        modelSelect.innerHTML = "";

        physicsModels.forEach(model => {
            const option = document.createElement("option");
            option.value = model.id;
            option.textContent = model.name;
            modelSelect.appendChild(option);
        });


        // Dropdown event
        modelSelect.addEventListener("change", () => {

            const selected = physicsModels.find(
                model => model.id === modelSelect.value
            );

            if (selected) selected.build();
        });


        // Load first model by default
        physicsModels[0].build();

    </script>


</body>

</html>